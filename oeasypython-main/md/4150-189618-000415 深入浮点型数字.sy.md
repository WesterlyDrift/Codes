---
show: step

version: 1.0
enable_checker: true
---

# 深入整型数字
## 回忆

- 上次了解分数类型变量
- 有三种初始化方法
	- 用小数当参数
	- 用整数当分子和分母
	- 用字符串
- 关于精度
	- 由于二进制无法精确对应十进制小数
	- 所以用分数
	- 或者用Decimal函数

### Decimal函数

- Decimal函数一定接收字符串型变量参数才能保持精确性
- 如果接收浮点型参数无法保持精确性

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210905-1630829490200)

- Fraction和Decimal都可以保持精确性
- 例子里面有个-47e-2 这是什么意思？🤪

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210905-1630829665648)

### e

- 使用 -47e-2

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629505705330)

- 第一个符号表示当前数字的正负
- 第二个符号表示十的指数
- -47e-2 = -47 * 10<sup>-2</sup>

### 练习

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629506176527)

- 这种表示法是科学计数法
- 一般来说小数点前面有一个数字
- 后面有尾数
- 再乘以指数
- 但是最终还是用2进制的方式存储的

### 存储

- 0.5
	- = 2<sup>-1</sup>
- 0.625 
	- = 2<sup>-1</sup> + 2<sup>-3</sup>
	- = 1 * 2<sup>-1</sup> + 0 * 2<sup>-2</sup>  + 1 * 2<sup>-3</sup>
	- =(0.101)<sub>2进制</sub>
- 0.1 
	- = 2<sup>-4</sup> + 2<sup>-5</sup> + 2<sup>-8</sup> + 2<sup>-9</sup> ...
	- = 0 * 2<sup>-1</sup> + 0 * 2<sup>-2</sup>  + 0 * 2<sup>-3</sup> + 1 * 2<sup>-4</sup> + 1 * 2<sup>-5</sup> ...
	- (0.000110011...)<sub>2进制</sub>
- 0.1是无法找到绝对对应的二进制数

### 实际情况
- 最终还是落实到浮点数形式进行存储

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629506297983)

- 三部分
	- 正负号
	- 指数
	- 尾数
- p之前是有效数字
- p之后是指数

### 显示边缘

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629506397246)

- 如果是10的-347次方
- 就看不到了
- 无法记录 
- 变成了0
- 具体最小多小能存的下呢？
- 这个规则叫做ieee-754
- 是从c语言的时候就定下来的浮点型规则

http://www.binaryconvert.com/result_double.html

### 绝对值最小浮点数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629506657270)

- 指数部分最小
- 当指数部分为0时
	- 尾数开头的1取消
	- 尾数如果全零就是零
	- 尾数部分最小只有最后1位
- 63个0，1个1
- 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000001
- 验证一下

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629507079178)

- 最大的浮点数是多少呢？

### 最大数
- 尝试指数全1

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629506991064)

- 指数全1就是NaN
- Not a Number
- 继续尝试

### 最大值

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629507034718)

- 1.79769313486231570814527423732 * 10<sup>308</sup>
- 验证一下

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629507409225)

- 为什么加1没有效果
- 因为是浮点运算
- 在10的308次方面前 
- 1相当于0*10的308次方
- 但是如果能够把尾数最后1位加1
- 就直接进上去了
- 结果是 inf 正无限
- infinite
- 如果我还想往上加可能么?

### 整型

- 用浮点型是不行了
- 改成整型

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210821-1629507965781)

- 一行80个字符
- 3行多大概308个字符
- 不但可以乘以10
- 居然可以来个最大值的乘方
- python肯定对int整型做了些什么
- 这就要查看python的源代码了
- 我们回到浮点型

### inf和nan

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210917-1631881851893)

- 最大值1e308再乘以10
- 得到了float("inf")
- 也是一个float型的值
- 这个无限大乘以0
- 可以得到float("nan")
- float("nan")
	- Not a Number
	- 不是值

### 总结 

- 这次了解科学计数法
- 科学计数法分成有效数字和指数两块
- 找到了双精度double型中绝对值最小和最大的数
- 最后发现int型在大数方面有效数字超过了双精度？
- 这可能吗？🤪
- 下次再说👋